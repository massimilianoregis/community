
var $community=
	{
	services:function(){return macumba.services.community2;},
	config:
		{
		facebook:
			{
			app:""
			},
		apply:function(){}
		},
	init:function(name){},
	register:
		{
		mail:"aa@ekaros.it",
		psw:"test",
		psw2:"test",
		"try":function()
			{
			$.get("/community/register",JSON.parse(JSON.stringify(this)),function(data)
					{						
					$(document).trigger("community.register");
					},"json");
			/*
			$community.services().register.send(this,function(data)
					{					
					$.extend($community.user,data);					
					});*/
			}
		},
	login:
		{
		basic:
			{			
			test:"pippo",
			mail:"massimiliano.regis@ekaros.it",
			psw:"pippo",
			"try":function()
				{				
				$.get("/community/login",JSON.parse(JSON.stringify(this)),function(data)
						{		
						$.extend($community.user,data);
						$community.user.logged=true;
						$(document).trigger("community.logged");
						},"json");
				/*
				$community.services().login.send(this,function(data)
					{					
					$.extend($community.user,data);
					});
				*/
				},
			remember:function(){},
			show:function(){}
			},
		qr:
			{
			"try":function(){},
			show:function(){}	
			},
		facebook:
			{
			"try":function(){}
			},
		twitter:
			{
			"try":function(){}
			},
		gplus:
			{
			"try":function(){}	
			}
		},
	user:
		{
		mail:"",
		name:"",
		secondName:"",
		password:
			{
			reset:function(){},
			send:function(){}
			},
		logout:function()
			{
			$.get("/community/logout");
			this.logged=false;
			$(document).trigger("community.logout");
			},
		save:function(){},
		show:function(){}
		}
	};
$(function()
	{
	$.get("/community/me",function(data)
			{		
			if(data==null) return;
			$.extend($community.user,data);
			$community.user.logged=true;
			$(document).trigger("community.logged");
			},"json");
	})